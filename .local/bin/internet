#!/bin/sh

# Detecta interface ativa
iface=$(ip route | awk '/default/ {print $5; exit}')

# Se não encontrou nenhuma interface de rede
[ -z "$iface" ] && {
    echo "󰪎 "
    exit 0
}

state=$(cat /sys/class/net/"$iface"/operstate 2>/dev/null)

case "$state" in
    up)
        if grep -q "$iface" /proc/net/wireless 2>/dev/null; then
            signal=$(awk -v iface="$iface" '$1 ~ iface {print int($3 * 100 / 70)}' /proc/net/wireless)
            echo " ${signal}%"
        else
            echo "󰖟 "
        fi
        ;;
    down|*)
        echo "󱞒 "
        ;;
esac
