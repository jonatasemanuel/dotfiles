#!/bin/sh

# Detecta interface ativa
iface=$(ip route | awk '/default/ {print $5; exit}')

# Se nÃ£o encontrou nenhuma interface de rede
[ -z "$iface" ] && {
    echo "âŒ No net"
    exit 0
}

state=$(cat /sys/class/net/"$iface"/operstate 2>/dev/null)

case "$state" in
    up)
        # Se for Wi-Fi, mostra intensidade do sinal
        if grep -q "$iface" /proc/net/wireless 2>/dev/null; then
            signal=$(awk -v iface="$iface" '$1 ~ iface {print int($3 * 100 / 70)}' /proc/net/wireless)
            echo "ï‡« ${signal}%"
        else
            # Ethernet conectada
            echo "ðŸŒ Connected"
        fi
        ;;
    down|*)
        echo "âŽ Disconnected"
        ;;
esac

# case "$(cat /sys/class/net/w*/operstate 2>/dev/null)" in
# 	down) wifiicon="ðŸ“¡ " ;;
# 	up) wifiicon="$(awk '/^\s*w/ { print "ï‡«", int($3 * 100 / 70) "% " }' /proc/net/wireless)" ;;
# esac
#
# # printf "%s%s\n" "$wifiicon" "$(sed "s/down/âŽ/;s/up/ðŸŒ/" /sys/class/net/e*/operstate 2>/dev/null)"
# printf "%s%s\n" "$wifiicon"
